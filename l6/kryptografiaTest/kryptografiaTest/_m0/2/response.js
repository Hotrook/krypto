var res = {'data':'HTTP/1.1 200 Partial Content\x0aDate: Sat, 10 Dec 2016 19:27:21 GMT\x0aServer: Apache/2.4.23 (Unix) OpenSSL/1.0.2j PHP/5.6.28 mod_perl/2.0.8-dev Perl/v5.16.3\x0aLast-Modified: Sat, 10 Dec 2016 12:23:38 GMT\x0aETag: \x2211d8-5434cf0ad0680\x22\x0aAccept-Ranges: bytes\x0aContent-Length: 4568\x0aContent-Range: bytes 0-4567/4568\x0aKeep-Alive: timeout=5, max=58\x0aConnection: Keep-Alive\x0aContent-Type: application/x-javascript\x0a\x0afunction dosth() {\x0a\x09var recipient = document.getElementById(\x22recipient\x22).value;\x0a\x09var account_number = document.getElementById(\x22account_number\x22).value;\x0a\x09var title = document.getElementById(\x22title\x22).value;\x0a\x09document.cookie =\x22ACCOUNT_NUMBER=\x22+account_number;\x0a\x09document.cookie =\x22RECIPIENT=\x22+recipient;\x0a\x09document.cookie =\x22TITLE=\x22+title;\x0a\x09console.log( account_number );\x0a\x09console.log( recipient );\x0a\x09console.log( title );\x0a\x09location.href = \x22./confirmation.php\x22;\x0a};\x0a\x0a\x0a\x0a\x0afunction send(){\x0a\x09\x09var username = getCookie(\x22NICK\x22);\x0a\x09\x09var recipient = getCookie(\x22RECIPIENT\x22);\x0a\x09\x09var account_number = getCookie(\x22ACCOUNT_NUMBER\x22);\x0a\x09\x09var title = getCookie(\x22TITLE\x22);\x0a\x09\x09$.ajax({\x0a\x09\x09\x09type    : \x22POST\x22,\x0a\x09\x09\x09url     : \x22New.php?\x22 + new Date().getTime(),\x0a\x09\x09\x09data    : {\x27username\x27: username,\x27recipient\x27: recipient, \x27account_number\x27: account_number, \x27title\x27: title },\x0a\x09\x09\x09dataType: \x22json\x22,\x0a\x09\x09\x09success : function() {\x0a\x09\x09\x09\x09location.href = \x22./MainPage.php\x22;\x0a\x0a\x09\x09\x09},\x0a\x09\x09\x09error : function (jqXHR, textStatus, errorThrown){\x0a\x09\x09\x09\x09console.log(\x22B\xc5\x82ad po SELECT: \x22 + textStatus + \x22 ; \x22 + errorThrown + \x22;\x22);\x0a\x09\x09\x09\x09console.log(errorThrown);\x0a\x09\x09\x09\x09console.log(textStatus);\x0a\x09\x09\x09\x09console.log(jqXHR);\x0a\x09\x09\x09}\x0a\x09\x09});\x0a}\x0a\x0a\x0a\x0a\x0a//Updates the chat\x0afunction updateChat(nick) {\x0a\x09\x09$.ajax({\x0a\x09\x09\x09type    : \x22POST\x22,\x0a\x09\x09\x09url     : \x22History.php?\x22 + new Date().getTime(),\x0a\x09\x09\x09data    : {\x27whatToDo\x27: \x27update\x27, \x27username\x27: nick },\x0a\x09\x09\x09dataType: \x22json\x22,\x0a\x09\x09\x09success : function(data) {\x0a\x09\x09\x09\x09var arr = data;\x0a\x09\x09\x09\x09var i;\x0a\x09\x09\x09\x09var out = \x22\x3ch2 id=\x27cos\x27\x3eHistoria przelew\xc3\xb3w\x3c/h2\x3e\x3ctable class=\x5c\x22table table-condensed\x5c\x22\x3e\x22;\x0a\x09\x09\x09\x09out += \x22\x3cthead\x3e\x3ctr\x3e\x3cth\x3eOdbiorca\x3c/th\x3e\x3cth\x3eNumer konta\x3c/th\x3e\x3cth\x3eData\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x22\x0a\x09\x09\x09\x09\x0a\x09\x09\x09\x09for(i = 0; i \x3c arr.length; i++) {\x0a\x09\x09\x09\x09\x09out += \x22\x3ctr\x3e\x22;\x0a\x09\x09\x09\x09\x09out+= \x22\x3ctd\x3e\x22; \x0a\x09\x09\x09\x09\x09out+= arr[i].recipient +\x0a\x09\x09\x09\x09\x09\x22\x3c/td\x3e\x3ctd\x3e\x22 +\x0a\x09\x09\x09\x09\x09arr[i].account_number +\x0a\x09\x09\x09\x09\x09\x22\x3c/td\x3e\x3ctd\x3e\x22; \x0a\x09\x09\x09\x09\x09out+= arr[i].title;\x0a\x09\x09\x09\x09\x09out+= \x22\x3c/td\x3e\x3c/tr\x3e\x22;\x0a\x09\x09\x09\x09}\x0a\x09\x09\x09\x09out += \x22\x3c/tbody\x3e\x3c/table\x3e\x22;\x0a\x09\x09\x09\x09$(\x27#history\x27).html(out);\x09\x0a\x0a\x09\x09\x09},\x0a\x09\x09\x09error : function (jqXHR, textStatus, errorThrown){\x0a\x09\x09\x09\x09console.log(\x22B\xc5\x82ad po SELECT: \x22 + textStatus + \x22 ; \x22 + errorThrown + \x22;\x22);\x0a\x09\x09\x09\x09console.log(jqXHR);\x0a\x09\x09\x09}\x0a\x09\x09});\x0a\x0a}\x0a\x0a\x0afunction updateAdmin(nick) {\x0a\x09\x09$.ajax({\x0a\x09\x09\x09type    : \x22POST\x22,\x0a\x09\x09\x09url     : \x22History.php?\x22 + new Date().getTime(),\x0a\x09\x09\x09data    : {\x27whatToDo\x27: \x27updateAdmin\x27, \x27username\x27: nick },\x0a\x09\x09\x09dataType: \x22json\x22,\x0a\x09\x09\x09success : function(data) {\x0a\x09\x09\x09\x09var arr = data;\x0a\x09\x09\x09\x09console.log(arr);\x0a\x09\x09\x09\x09var i;\x0a\x09\x09\x09\x09var out = \x22\x3ch2 id=\x27cos\x27\x3eHistoria przelew\xc3\xb3w\x3c/h2\x3e\x3ctable class=\x5c\x22table table-condensed\x5c\x22\x3e\x22;\x0a\x09\x09\x09\x09out += \x22\x3cthead\x3e\x3ctr\x3e\x3cth\x3eNadawca\x3c/th\x3e\x3cth\x3eOdbiorca\x3c/th\x3e\x3cth\x3eNumer konta\x3c/th\x3e\x3cth\x3eTytu\xc5\x82\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x22\x0a\x09\x09\x09\x09\x0a\x09\x09\x09\x09for(i = 0; i \x3c arr.length; i++) {\x0a\x09\x09\x09\x09\x09out += \x22\x3ctr\x3e\x22;\x0a\x09\x09\x09\x09\x09out+= \x22\x3ctd\x3e\x22; \x0a\x09\x09\x09\x09\x09out+= arr[i].username; \x0a\x09\x09\x09\x09\x09out+=\x22\x3c/td\x3e\x3ctd\x3e\x22\x0a\x09\x09\x09\x09\x09out+= arr[i].recipient +\x0a\x09\x09\x09\x09\x09\x22\x3c/td\x3e\x3ctd\x3e\x22 +\x0a\x09\x09\x09\x09\x09arr[i].account_number +\x0a\x09\x09\x09\x09\x09\x22\x3c/td\x3e\x3ctd\x3e\x22; \x0a\x09\x09\x09\x09\x09out+= arr[i].title;\x0a\x09\x09\x09\x09\x09out+= \x22\x3c/td\x3e\x3ctd\x3e\x22;\x0a\x09\x09\x09\x09\x09out+= \x22\x3cdiv id=\x5c\x22chbox\x5c\x22 class=\x5c\x22checkbox\x5c\x22\x3e\x3clabel\x3e\x3cinput id=\x5c\x22original\x5c\x22 type=\x5c\x22checkbox\x5c\x22 value=\x5c\x22\x5c\x22\x3e\x3c/label\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x22\x0a\x09\x09\x09\x09}\x0a\x09\x09\x09\x09out += \x22\x3c/tbody\x3e\x3c/table\x3e\x22;\x0a\x09\x09\x09\x09\x09out+=\x22  \x3cbutton onclick=\x5c\x22admin()\x5c\x22 class=\x5c\x22btn btn-primary\x5c\x22 id=\x5c\x22input\x5c\x22\x3eZatwierd\xc5\xba\x3c/button\x3e\x22\x0a\x09\x09\x09\x09$(\x27#history\x27).html(out);\x09\x0a\x0a\x09\x09\x09},\x0a\x09\x09\x09error : function (jqXHR, textStatus, errorThrown){\x0a\x09\x09\x09\x09console.log(\x22B\xc5\x82ad po SELECT: \x22 + textStatus + \x22 ; \x22 + errorThrown + \x22;\x22);\x0a\x09\x09\x09\x09console.log(jqXHR);\x0a\x09\x09\x09}\x0a\x09\x09});\x0a\x0a}\x0a\x0a\x0a\x0afunction getCookie(name)\x0a{\x0a\x09var re = new RegExp(name + \x22=([^;]+)\x22);\x0a\x09var value = re.exec(document.cookie);\x0a\x09return (value != null) ? unescape(value[1]) : null;\x0a}\x0a\x0a\x0afunction admin(){\x0a\x09var elem = document.getElementsByTagName(\x27tr\x27);\x0a\x09\x09console.log( elem);\x0a\x09for ( var i = 1 ; i \x3c elem.length  ; i++ ){\x0a\x09\x09console.log( elem[ i ] );\x0a\x09\x09var temp = elem[i].childNodes[4].childNodes[ 0 ].childNodes[ 0 ].childNodes[ 0 ];\x0a\x09\x09if( temp.checked ){\x0a\x0a\x09\x09\x09var username =  elem[ i ].childNodes[ 0 ].textContent;\x0a\x09\x09\x09var recipient =  elem[ i ].childNodes[ 1 ].textContent;\x0a\x09\x09\x09var account_number =  elem[ i ].childNodes[ 2 ].textContent;\x0a\x09\x09\x09var title =  elem[ i ].childNodes[ 3 ].textContent;\x0a\x09\x09\x09console.log( username,recipient,account_number,title);\x0a\x09\x09\x09$.ajax({\x0a\x09\x09\x09\x09type    : \x22POST\x22,\x0a\x09\x09\x09\x09url     : \x22History.php?\x22 + new Date().getTime(),\x0a\x09\x09\x09\x09data    : {\x27whatToDo\x27: \x27accept\x27, \x27username\x27: username,\x27recipient\x27: recipient, \x27account_number\x27: account_number, \x27title\x27: title },\x0a\x09\x09\x09\x09dataType: \x22json\x22,\x0a\x09\x09\x09\x09success : function() {\x0a\x09\x09\x09\x09\x09location.href = \x22./AdminPage.php\x22;\x0a\x0a\x09\x09\x09\x09},\x0a\x09\x09\x09\x09error : function (jqXHR, textStatus, errorThrown){\x0a\x09\x09\x09\x09\x09console.log(\x22B\xc5\x82ad po SELECT: \x22 + textStatus + \x22 ; \x22 + errorThrown + \x22;\x22);\x0a\x09\x09\x09\x09\x09console.log(jqXHR);\x0a\x09\x09\x09\x09}\x0a\x09\x09\x09});\x0a\x09\x09}\x0a\x09}\x0a\x0a\x0a}'}